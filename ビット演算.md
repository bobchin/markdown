# ビットフラグ

## 処理方法

値を、a = 0101 とする。  
b1 = 0001, b2 = 0010  

|  a  |  b  | ~b  | a & b | a & ~b | a \| b | a ^ b |
| :-: | :-: | :-: | :---: | :----: | :----: | :---: |
|  0  |  0  |  1  |   0   |   0    |   0    |   0   |
|  1  |  0  |  1  |   0   |   1    |   1    |   1   |
|  0  |  1  |  0  |   0   |   0    |   1    |   1   |
|  1  |  1  |  0  |   1   |   0    |   1    |   0   |

## フラグを立てる

- 立てるビットとORを取る

  ```c
  0 | 0 = 0 // フラグを立てていないところは変わらない
  1 | 0 = 1 // フラグを立てていないところは変わらない
  0 | 1 = 1 // フラグを立てるとこは1
  1 | 1 = 1 // フラグを立てるとこは1
  a | b1 = 0101 | 0001 = 0101
  a | b2 = 0101 | 0010 = 0111
  ```

## フラグを消す

- 立てるフラグのNOTとANDを取る

  ```c
  0 & ~0 = 0 & 1 = 0 // フラグを消さないところは変わらない
  1 & ~0 = 1 & 1 = 1 // フラグを消さないところは変わらない
  0 & ~1 = 0 & 0 = 0 // フラグを消すとこは0
  1 & ~1 = 1 & 0 = 0 // フラグを消すとこは0
  a & ~b1 = 0101 & 1110 = 0100
  a & ~b2 = 0101 & 1101 = 0101
  ```

## フラグを反転

- 立てるビットとXORを取る

  ```c
  0 ^ 0 = 0 // フラグを反転しないところは変わらない
  1 ^ 0 = 1 // フラグを反転しないところは変わらない
  0 ^ 1 = 1 // フラグを反転するところは反転
  1 ^ 1 = 0 // フラグを反転するところは反転
  a ^ b1 = 0101 ^ 0001 = 0100
  a ^ b2 = 0101 ^ 0010 = 0111
  ```

## 状態を取得

- 取得するビットとANDを取る

  ```c
  0 & 0 = 0 // 取得しないところは0
  1 & 0 = 0 // 取得しないところは0
  0 & 1 = 0 // 取得するところは値(0 かそれ以外で判断)
  1 & 1 = 1 // 取得するところは値(0 かそれ以外で判断)
  a & b1 = 0101 & 0001 = 0001
  a & b2 = 0101 & 0010 = 0000
  ```
