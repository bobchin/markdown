# PSR

[PHP-FIG](http://www.php-fig.org/) （フレームワーク・アプリケーション・ライブラリの開発者が集まったグループ）が策定した*「コーディング規約」*

## 参考

- http://www.infiniteloop.co.jp/blog/2012/10/psrphp/
- http://www.slideshare.net/yandod/psrphp
- http://9ensan.com/blog/programming/php/php-psr-coding-standards/

## 規約

- PSR-0:Autoloading Standard (オートローディング規約) ※PSR-4が推奨されるため非推奨となった
- PSR-1:Basic Coding Standard（基本コーディング規約）
- PSR-2:Coding Style Guide（コーディングスタイルガイド）
- PSR-3:Logger Interface（ロガーインタフェース）
- PSR-4:Autoloader（オートローダ）

## PSR-0

- http://www.php-fig.org/psr/psr-0/
- http://www.infiniteloop.co.jp/docs/psr/psr-0.html

以下にオートローダーの相互運用について守るべき必須条件を記述します。

*[必須条件]*
- 完全修飾された名前空間とクラスは次の構造であること。 \<ベンダー名>\(<名前空間>\)*<クラス名>

- それぞれの名前空間は、トップレベルの名前空間（ベンダー名）を持つこと。
- それぞれの名前空間は、下位にいくつでも名前空間を持つことが可能。
- それぞれの名前空間はの区切りは、ファイルシステムから読み込まれる際に**DIRECTORY_SEPARATOR** に変換される。
- *クラス名* に含まれるアンダースコア(**_**)は **DIRECTORY_SEPARATOR** に変換される。名前空間においてアンダースコアは特別な意味を持たないこと。
- 完全修飾された名前空間およびクラスは、ファイルシステムから読み込まれる際に *.php* で終了する。
- ベンダー名・名前空間・クラス名に含まれるアルファベット文字は、大文字小文字の組み合わせは自由である。


## PSR-1

- http://www.php-fig.org/psr/psr-1/
- http://www.infiniteloop.co.jp/docs/psr/psr-1-basic-coding-standard.html

このセクションの標準は、標準的なコーディング要素と考えられるもので構成されています。その要素は、共有されるPHPコード間で高レベルの技術的な相互運用を保証するために必要なものです。

 - 概観
   - ファイルは `<?php` か `<?` タグのみ使用しなければならない。
   - ファイルは PHPコード用として BOM なしの UTF-8 のみ使用しなければならない。
   - ファイルは、シンボル（クラス・関数・定数など）を宣言するか、副作用（出力を生成する・.ini 設定を変更するなど）を生じるかのどちらかであるべき。両方を同時にすべきではない。
   - 名前空間やクラスはオートローディング(PSR-0, PSR-4)に従わなければならない。
   - クラス名は *StudlyCaps(単語の先頭文字を大文字にする)* で宣言されなければならない。
   - クラス定数はアンダースコア区切りの大文字で宣言されなければならない。
   - メソッド名は *camelCase(単語の先頭文字を大文字にするが最初のみ小文字)* で宣言されなければならない。

- ファイル
  - PHPタグ
    PHPコードは、長いタグ `<?php ?>` か 短いechoタグ `<?= ?>` を使用しなければならない。他のタグを使用してはならない。
  - 文字コード
    PHP は BOM なしの UTF-8 のみ使用しなければならない。
  - 副作用
    ファイルは新しいシンボル（クラス・関数・定数など）を宣言し、他の副作用を生じないべきである。または副作用を伴うロジックを実行すべきである。両方を同時にすべきではない。
    **副作用** という語句はロジックの実行を意味します。クラス・関数・定数などの宣言とは直接関係しませんが、まれにファイルをインクルードことはあります。
    **副作用** 次のようなものですが、すべてではありません：
    出力の生成・`require` や `include` の使用の明示・外部サービスへの接続・設定の変更・エラーや例外の発生・グローバル変数や静的変数の変更・ファイルからの読み書きなどです。
    次に宣言と副作用の両方を持つファイルの例を挙げます。
    これは避けるべき例になります。

```PHP
<?php
// 副作用: ini 設定の変更
ini_set('error_reporting', E_ALL);

// 副作用: ファイルの読み込み
include "file.php";

// 副作用: 出力の生成
echo "<html>\n";

// 宣言
function foo()
{
    // 関数の内容
}
```

    次のサンプルは副作用をもたない宣言を含むファイルです。真似すべき例になります。

```PHP
<?php
// 宣言
function foo()
{
    // 関数の内容
}

// 副作用のない条件付きの宣言
if (! function_exists('bar')) {
    function bar()
    {
        // 関数の内容
    }
}
```

- 名前空間とクラス名
  名前空間とクラスはオートローディング(PSR-0, PSR-4)に従わなければなければなりません。
  これは次のことを意味します。それぞれのクラスがそれ自体が1つのファイル内にあり、少なくとも１つのレベル（トップレベルのベンダー名）の名前空間内にあります。
  クラス名は *StudlyCaps* で宣言しなければなりません。
  PHP 5.3 で記述されたコードは正式な名前空間を使用しなければなりません。

```PHP
<?php
// PHP 5.3 以降:
namespace Vendor\Model;

class Foo
{
}
```

PHP 5.2 以前で記述されたコードは、クラス名に *Vendor_* プレフィックスを使用した仮の名前空間の慣習を使用しなければなりません。

```PHP
?php
// PHP 5.2.x 以前:
class Vendor_Model_Foo
{
}
```

- クラス定数・プロパティ・メソッド
  *クラス* という用語は、クラス・インターフェース・トレイト全てのことを指します。
  
  - 定数
    クラス定数はすべてアンダースコア区切りをもつ大文字で宣言されなければならない。

```PHP
<?php
namesapce Vendor\Model;

class Foo
{
    const VERSION = '1.0';
    const DATE_APPROVED = '2012-06-01';
}
```

  - プロパティ
    このガイドでは、`$StudlyCaps` や `$camelCase` や `$under_score` などのプロパティ名を使用することの推奨は意図的に避けています。
    命名についての慣習を使用するときは、妥当なスコープ内で一貫性をもたせるべきです。そのスコープはベンダーレベル・パッケージレベル・クラスレベル・メソッドレベルなど様々です。

  - メソッド
    メソッドは `camelCase()` で宣言されなければならない。


## PSR-2

- http://www.php-fig.org/psr/psr-2/
- http://www.infiniteloop.co.jp/docs/psr/psr-2-coding-style-guide.html

  コーディングスタイルガイド
  
  このガイドは PSR-1（基本コーディング標準）の延長であり拡張です。
  このガイドの意図は、異なる著者がコードを検索する際の認識のズレを減らすことです。そのために、PHPコードの整形の仕方についての共有されるべきルールや期待を列挙します。
  スタイルルールはここにおいては、様々なプロジェクメンバー内の共通点から導かれています。さまざまな著者が複数のプロジェクトに渡って協調する際に、全てのプロジェクトで使用される一連のガイドラインがあると役立ちます。このように、このガイドの恩恵はルールそれ自体にあるわけではなく、ルールを共有することにあります。
  このドキュメント内のキーワード *MUST* *MUST NOT* *REQUIRED* *SHALL* *SHALL NOT* *SHOULD* *SHOULD NOT* *RECOMMENDED* *MAY* *OPTIONAL* は**RFC 2119** で記述されているもので解釈してください。
  
- 概観
  - コードは、"コーディングスタイルガイド" PSR-1 に従わなければならない。















あ
